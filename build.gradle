apply plugin: 'scala'
apply plugin: 'idea'

repositories {
    mavenCentral()		
    mavenRepo urls: [ "http://akka.io/repository/", "http://download.java.net/maven/2/",
                      "http://repository.jboss.org/nexus/content/groups/public-jboss/",
                      "http://nexus.scala-tools.org/content/repositories/public/",
                      "http://guiceyfruit.googlecode.com/svn/repo/releases/" ]
}

dependencies {
    def scalaVersion = '2.9.0.RC1'
    def akkaVersion = '1.1-M1'
    // Libraries needed to run the scala tools
    scalaTools 'org.scala-lang:scala-compiler:' + scalaVersion
    scalaTools 'org.scala-lang:scala-library:' + scalaVersion
    
    // Akka
    compile 'se.scalablesolutions.akka:akka:' + akkaVersion
    testCompile 'se.scalablesolutions.akka:akka:' + akkaVersion
    
    // Libraries needed for scala api
    compile 'org.scala-lang:scala-library:' + scalaVersion
    testCompile 'org.scala-lang:scala-library:' +scalaVersion
    
    //logging.captureStandardOutput LogLevel.DEBUG
    testCompile 'org.scalatest:scalatest:1.3'
}

task deps(type:Copy) { 
  into 'deps' 
  from configurations.runtime 
}

// Currently broken for Scala, works for Java
task run(type:JavaExec) { 
  classpath = configurations.runtime
  println("My classpath is: ${classpath}") 
  main='actorproto.Client' 
}